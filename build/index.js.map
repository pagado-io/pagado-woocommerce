{"version":3,"file":"index.js","mappings":"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","sources":["webpack:///external window \"React\"","webpack:///external window [\"wp\",\"element\"]","webpack:///external window [\"wp\",\"htmlEntities\"]","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/index.js"],"sourcesContent":["module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { decodeEntities } from '@wordpress/html-entities';\nimport React, { useState, useEffect } from \"@wordpress/element\";\n\nconst { registerPaymentMethod } = window.wc.wcBlocksRegistry;\nconst { getSetting } = window.wc.wcSettings;\nconst settings = getSetting('pagado_data', {});\nconst label = decodeEntities(settings.title);\n\nconst server = 'https://pagado.io';\n\nconst Content = () => {\n    return decodeEntities(settings.description || '');\n};\n\nconst PagadoIframeContent = (props) => {\n    useEffect(() => {\n        jQuery.ajax({\n            method: 'post',\n            url: '/?wc-ajax=get_pagado_data',\n        }).done(function (res, status, xhr) {\n            if (status === 'success') {\n                initializeIframe(res.data);\n            }\n        }).fail(function (xhr, status, error) {\n            console.log(error);\n        });\n    }, []);\n\n    console.log(props);\n\n    return (\n        <>\n            <p>{decodeEntities(settings.description || '')}</p>\n            <div id=\"pagado-checkout-wrapper\">\n                <iframe\n                    id=\"pagado-checkout-iframe\"\n                    src=\"https://pagado.io/checkout-buttons\"\n                    name=\"pagado_checkout_iframe\"\n                    height=\"100%\"\n                    width=\"100%\"\n                    title=\"Pagado Checkout\"\n                    style={{ border: 'none' }} />\n            </div>\n        </>\n    );\n}\n\nconst Label = (props) => {\n    const { PaymentMethodLabel } = props.components;\n    return <PaymentMethodLabel text={label} />\n};\n\nregisterPaymentMethod({\n    name: \"pagado\",\n    label: <Label />,\n    content: <PagadoIframeContent />,\n    edit: <Content />,\n    canMakePayment: () => true,\n    ariaLabel: label,\n    supports: {\n        features: settings.supports,\n    }\n});\n\n/**\n * Initialize iframe with required data and take action\n * based on message communication between windows.\n *\n * @param {*} data Required data for the window\n * @returns\n */\nfunction initializeIframe(data) {\n    const iframe = document.getElementById('pagado-checkout-iframe');\n\n    if (!iframe) {\n        return;\n    }\n    const iframeWindow = iframe.contentWindow;\n    iframe.addEventListener('load', handleLoad, true);\n\n    function handleLoad() {\n        iframeWindow.postMessage('loaded', server);\n    }\n    let checkoutWindow;\n\n    jQuery(window).on('message', function (e) {\n        e = e.originalEvent;\n\n        if (e.origin === server) {\n            if (e.data) {\n                const eventData = JSON.parse(e.data);\n\n                // console.log(eventData);\n                // return;\n\n                if (eventData.target === 'checkout_button' && eventData.event === 'click') {\n                    const urlData = {\n                        origin: window.origin,\n                        redirect: window.location.href,\n                        variant: data.variant,\n                        to: data.to,\n                        price: data.price,\n                        currency: data.currency,\n                        version: data.version,\n                    };\n\n                    const urlParams = `currency=${urlData.currency}&price=${urlData.price}&to=${urlData.to}&redirect=${urlData.redirect}&variant=${urlData.variant}&version=${urlData.version}`\n\n                    const settings = {\n                        url: `${server}/checkout?${urlParams}`,\n                        target: 'pagado-checkout-window',\n                        width: 300,\n                        height: 500,\n                        left: 100,\n                        top: 100,\n                    };\n\n                    settings.left = window.innerWidth / 2 - settings.width / 2;\n                    settings.top = window.innerHeight / 2 - settings.height / 2;\n\n                    const features = `width=${settings.width}, height=${settings.height}, left=${settings.left}, top=${settings.top}`;\n\n                    checkoutWindow = window.open(settings.url, settings.target, features);\n                }\n\n                if (eventData.target === 'checkout_window' && eventData.event === 'checkout') {\n                    const checkoutForm = $('form.checkout');\n                    const transactionIdHiddenField = checkoutForm.find('#pagado_data');\n\n                    if (transactionIdHiddenField.length) {\n                        transactionIdHiddenField.remove();\n                    }\n\n                    if (checkoutWindow && !checkoutWindow.closed) {\n                        checkoutWindow.close();\n\n                        checkoutForm.append(`<input type='hidden' id='pagado_data' name='pagado_data' value=${JSON.stringify(eventData)}>`);\n\n                        $('#place_order').click();\n                    }\n                }\n            }\n        }\n    });\n}\n"],"names":["decodeEntities","React","useState","useEffect","registerPaymentMethod","window","wc","wcBlocksRegistry","getSetting","wcSettings","settings","label","title","server","Content","description","PagadoIframeContent","props","jQuery","ajax","method","url","done","res","status","xhr","initializeIframe","data","fail","error","console","log","createElement","Fragment","id","src","name","height","width","style","border","Label","PaymentMethodLabel","components","text","content","edit","canMakePayment","ariaLabel","supports","features","iframe","document","getElementById","iframeWindow","contentWindow","addEventListener","handleLoad","postMessage","checkoutWindow","on","e","originalEvent","origin","eventData","JSON","parse","target","event","urlData","redirect","location","href","variant","to","price","currency","version","urlParams","left","top","innerWidth","innerHeight","open","checkoutForm","$","transactionIdHiddenField","find","length","remove","closed","close","append","stringify","click"],"sourceRoot":""}